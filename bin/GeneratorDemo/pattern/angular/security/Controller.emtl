<?xml version="1.0" encoding="UTF-8"?>
<xmi:XMI xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ecore="http://www.eclipse.org/emf/2002/Ecore" xmlns:mtl="http://www.eclipse.org/acceleo/mtl/3.0" xmlns:ocl.ecore="http://www.eclipse.org/ocl/1.1.0/Ecore">
  <mtl:Module name="Controller" nsURI="GeneratorDemo::pattern::angular::security::Controller" startHeaderPosition="29" endHeaderPosition="167">
    <input>
      <takesTypesFrom href="http://www.eclipse.org/uml2/5.0.0/UML#/"/>
    </input>
    <ownedModuleElement xsi:type="mtl:Template" name="generateElementController" visibility="Public" main="true">
      <body xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="&#xA;"/>
      <body xsi:type="mtl:ForBlock">
        <body xsi:type="mtl:IfBlock">
          <body xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="&#xA;"/>
          <body xsi:type="mtl:FileBlock" openMode="OverWrite">
            <body xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="package com.softtek.acceleo.demo.security.controller;&#xA;&#xA;import java.util.List;&#xA;import java.util.Map;&#xA;&#xA;import javax.servlet.http.HttpServletRequest;&#xA;import javax.servlet.http.HttpServletResponse;&#xA;&#xA;import org.springframework.beans.factory.annotation.Autowired;&#xA;import org.springframework.security.access.prepost.PreAuthorize;&#xA;import org.springframework.web.bind.annotation.RequestBody;&#xA;import org.springframework.web.bind.annotation.RequestMapping;&#xA;import org.springframework.web.bind.annotation.RequestMethod;&#xA;import org.springframework.web.bind.annotation.RequestParam;&#xA;import org.springframework.web.bind.annotation.ResponseBody;&#xA;import org.springframework.web.bind.annotation.RestController;&#xA;&#xA;import com.softtek.acceleo.demo.domain.AdminPermiso;&#xA;import com.softtek.acceleo.demo.domain.ConfigPermisos;&#xA;import com.softtek.acceleo.demo.service.AdminPermisoService;&#xA;&#xA;&#xA;&#xA;@RestController&#xA;public class AdminPermisoController {&#xA;&#xA;&#x9;@Autowired&#xA;&#x9;private AdminPermisoService adminPermisoService;&#xA;&#x9;&#xA;&#x9;AdminPermiso adminPermiso = new AdminPermiso();&#xA;&#x9;&#xA;&#x9;/**&#xA;&#x9; * Obtiene informacion de los afilliados.&#xA;&#x9; * @param requestParams.&#xA;&#x9; * @param request.&#xA;&#x9; * @param response.&#xA;&#x9; * @return List&lt;AdminPermiso>.&#xA;&#x9; */&#xA;&#x9;@RequestMapping(value = &quot;/adminPermiso&quot;, method = RequestMethod.GET, produces = &quot;application/json&quot;)&#xA;&#x9;@PreAuthorize(&quot;hasRole('MANAGESEARCH')&quot;)&#xA;&#x9;public @ResponseBody  List&lt;ConfigPermisos> getAdminPermisos(@RequestParam Map&lt;String,String> requestParams, HttpServletRequest request, HttpServletResponse response) {&#xA;&#xA;&#xA;&#x9;&#x9;List&lt;ConfigPermisos> listAdminPermiso = null;&#xA;&#xA;&#x9;&#x9;&#xA;       &#x9;listAdminPermiso = adminPermisoService.listAdminPermiso();&#xA;&#xA;&#xA;&#x9;&#x9;response.setHeader(&quot;Access-Control-Expose-Headers&quot;, &quot;x-total-count&quot;);&#xA;&#xA;&#x9;&#x9;System.out.println(&quot;Respuesta: &quot;+ listAdminPermiso.size());&#xA;&#x9;&#x9;&#xA;&#x9;&#x9;return listAdminPermiso;&#xA;&#x9;}&#xA;&#x9;&#xA;&#x9;@RequestMapping(value = &quot;/adminPermiso&quot;, method = RequestMethod.PUT, produces = &quot;application/json&quot;)&#xA;&#x9;@PreAuthorize(&quot;hasRole('MANAGEUPDATE')&quot;)  &#xA;    public void updateAuthorityPrivilege(@RequestBody ConfigPermisos configPermisos) {&#xA;&#x9;&#x9;&#xA;&#x9;&#x9;// UpdateData&#xA;&#x9;&#x9;adminPermisoService.updateAuthorityPrivilege(configPermisos);&#xA;&#x9;&#x9;&#xA;&#x9;&#x9;System.out.println(&quot;Dato Actualizado&quot;);&#xA;&#x9;}&#x9;&#xA;}&#xA;"/>
            <fileUrl xsi:type="ocl.ecore:OperationCallExp">
              <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
              <source xsi:type="ocl.ecore:OperationCallExp">
                <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                <source xsi:type="ocl.ecore:OperationCallExp">
                  <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                  <source xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="main/java/">
                    <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                  </source>
                  <argument xsi:type="ocl.ecore:OperationCallExp" referredOperation="/1/oclstdlib_String_Class/replaceAll">
                    <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                    <source xsi:type="ocl.ecore:PropertyCallExp">
                      <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                      <source xsi:type="ocl.ecore:VariableExp" name="p" referredVariable="/0/generateElementController/%.1/p">
                        <eType xsi:type="ecore:EClass" href="http://www.eclipse.org/uml2/5.0.0/UML#//Package"/>
                      </source>
                      <referredProperty xsi:type="ecore:EAttribute" href="http://www.eclipse.org/uml2/5.0.0/UML#//NamedElement/name"/>
                    </source>
                    <argument xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="\.">
                      <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                    </argument>
                    <argument xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="/">
                      <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                    </argument>
                  </argument>
                  <referredOperation xsi:type="ecore:EOperation" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String_Class/concat"/>
                </source>
                <argument xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="/controller/">
                  <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                </argument>
                <referredOperation xsi:type="ecore:EOperation" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String_Class/concat"/>
              </source>
              <argument xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="AdminPermisoController.java">
                <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
              </argument>
              <referredOperation xsi:type="ecore:EOperation" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String_Class/concat"/>
            </fileUrl>
          </body>
          <body xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="&#xA;"/>
          <body xsi:type="mtl:FileBlock" openMode="OverWrite">
            <body xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="package com.softtek.acceleo.demo.security.controller;&#xA;&#xA;import java.util.Objects;&#xA;import javax.servlet.http.HttpServletRequest;&#xA;&#xA;import org.slf4j.Logger;&#xA;import org.slf4j.LoggerFactory;&#xA;import org.springframework.beans.factory.annotation.Autowired;&#xA;import org.springframework.beans.factory.annotation.Qualifier;&#xA;import org.springframework.beans.factory.annotation.Value;&#xA;import org.springframework.context.annotation.PropertySource;&#xA;import org.springframework.http.HttpStatus;&#xA;import org.springframework.http.ResponseEntity;&#xA;import org.springframework.security.authentication.AuthenticationManager;&#xA;import org.springframework.security.authentication.BadCredentialsException;&#xA;import org.springframework.security.authentication.DisabledException;&#xA;import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;&#xA;import org.springframework.security.core.userdetails.UserDetails;&#xA;import org.springframework.security.core.userdetails.UserDetailsService;&#xA;import org.springframework.web.bind.annotation.ExceptionHandler;&#xA;import org.springframework.web.bind.annotation.RequestBody;&#xA;import org.springframework.web.bind.annotation.RequestMapping;&#xA;import org.springframework.web.bind.annotation.RequestMethod;&#xA;import org.springframework.web.bind.annotation.RestController;&#xA;import com.softtek.acceleo.demo.security.JwtAuthenticationRequest;&#xA;import com.softtek.acceleo.demo.security.JwtTokenUtil;&#xA;import com.softtek.acceleo.demo.security.JwtUser;&#xA;import com.softtek.acceleo.demo.security.exception.AuthenticationException;&#xA;import com.softtek.acceleo.demo.security.service.JwtAuthenticationResponse;&#xA;&#xA;@RestController&#xA;@PropertySource(&quot;application.properties&quot;)&#xA;public class AuthenticationRestController {&#xA;&#x9;&#xA;&#x9;private final Logger logger = LoggerFactory.getLogger(this.getClass());&#xA;&#xA;    @Value(&quot;${jwt.header}&quot;)&#xA;    private String tokenHeader;&#xA;&#xA;    @Autowired&#xA;    private AuthenticationManager authenticationManager;&#xA;&#xA;    @Autowired&#xA;    private JwtTokenUtil jwtTokenUtil;&#xA;&#xA;    @Autowired&#xA;    @Qualifier(&quot;jwtUserDetailsService&quot;)&#xA;    private UserDetailsService userDetailsService;&#xA;&#xA;    //@RequestMapping(value = &quot;${jwt.route.authentication.path}&quot;, method = RequestMethod.POST)&#xA;    //@RequestMapping(value = &quot;/SADFB/auth&quot;, method = RequestMethod.POST)&#xA;    @RequestMapping(value = &quot;${jwt.route.authentication.path}&quot;, method = RequestMethod.POST)    &#xA;    public ResponseEntity&lt;?> createAuthenticationToken(@RequestBody JwtAuthenticationRequest authenticationRequest) throws AuthenticationException {&#xA;&#xA;    &#x9;logger.info(&quot;Enter createAuthenticationToken&quot;);&#xA;&#xA;        authenticate(authenticationRequest.getUsername(), authenticationRequest.getPassword());&#xA;&#xA;    &#x9;logger.info(&quot;Out authenticate&quot;);&#xA;&#xA;        // Reload password post-security so we can generate the token&#xA;        final UserDetails userDetails = userDetailsService.loadUserByUsername(authenticationRequest.getUsername());&#xA;        final String token = jwtTokenUtil.generateToken(userDetails);&#xA;&#xA;        // Return the token&#xA;        return ResponseEntity.ok(new JwtAuthenticationResponse(token));&#xA;    }&#xA;&#xA;    @RequestMapping(value = &quot;${jwt.route.authentication.refresh}&quot;, method = RequestMethod.GET)&#xA;    public ResponseEntity&lt;?> refreshAndGetAuthenticationToken(HttpServletRequest request) {&#xA;        String authToken = request.getHeader(tokenHeader);&#xA;        final String token = authToken.substring(7);&#xA;        String username = jwtTokenUtil.getUsernameFromToken(token);&#xA;        JwtUser user = (JwtUser) userDetailsService.loadUserByUsername(username);&#xA;&#xA;        if (jwtTokenUtil.canTokenBeRefreshed(token, user.getLastPasswordResetDate())) {&#xA;            String refreshedToken = jwtTokenUtil.refreshToken(token);&#xA;            return ResponseEntity.ok(new JwtAuthenticationResponse(refreshedToken));&#xA;        } else {&#xA;            return ResponseEntity.badRequest().body(null);&#xA;        }&#xA;    }&#xA;&#xA;    @ExceptionHandler({AuthenticationException.class})&#xA;    public ResponseEntity&lt;String> handleAuthenticationException(AuthenticationException e) {&#xA;        return ResponseEntity.status(HttpStatus.UNAUTHORIZED).body(e.getMessage());&#xA;    }&#xA;&#xA;    /**&#xA;     * Authenticates the user. If something is wrong, an {@link AuthenticationException} will be thrown&#xA;     */&#xA;    private void authenticate(String username, String password) {&#xA;        Objects.requireNonNull(username);&#xA;        Objects.requireNonNull(password);&#xA;&#xA;        logger.info(&quot;Username: &quot;+username);&#xA;        logger.info(&quot;Password: &quot;+password);&#xA;&#xA;        try {&#xA;        &#x9;logger.info(&quot;Before authenticationManager&quot;);&#xA;            authenticationManager.authenticate(new UsernamePasswordAuthenticationToken(username, password));&#xA;        &#x9;logger.info(&quot;After authenticationManager&quot;);&#xA;&#xA;        } catch (DisabledException e) {&#xA;            throw new AuthenticationException(&quot;User is disabled!&quot;, e);&#xA;        } catch (BadCredentialsException e) {&#xA;            throw new AuthenticationException(&quot;Bad credentials!&quot;, e);&#xA;        }&#xA;    }&#xA;}&#xA;"/>
            <fileUrl xsi:type="ocl.ecore:OperationCallExp">
              <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
              <source xsi:type="ocl.ecore:OperationCallExp">
                <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                <source xsi:type="ocl.ecore:OperationCallExp">
                  <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                  <source xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="main/java/">
                    <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                  </source>
                  <argument xsi:type="ocl.ecore:OperationCallExp" referredOperation="/1/oclstdlib_String_Class/replaceAll">
                    <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                    <source xsi:type="ocl.ecore:PropertyCallExp">
                      <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                      <source xsi:type="ocl.ecore:VariableExp" name="p" referredVariable="/0/generateElementController/%.1/p">
                        <eType xsi:type="ecore:EClass" href="http://www.eclipse.org/uml2/5.0.0/UML#//Package"/>
                      </source>
                      <referredProperty xsi:type="ecore:EAttribute" href="http://www.eclipse.org/uml2/5.0.0/UML#//NamedElement/name"/>
                    </source>
                    <argument xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="\.">
                      <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                    </argument>
                    <argument xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="/">
                      <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                    </argument>
                  </argument>
                  <referredOperation xsi:type="ecore:EOperation" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String_Class/concat"/>
                </source>
                <argument xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="/controller/">
                  <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                </argument>
                <referredOperation xsi:type="ecore:EOperation" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String_Class/concat"/>
              </source>
              <argument xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="AuthenticationRestController.java">
                <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
              </argument>
              <referredOperation xsi:type="ecore:EOperation" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String_Class/concat"/>
            </fileUrl>
          </body>
          <body xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="&#xA;"/>
          <body xsi:type="mtl:FileBlock" openMode="OverWrite">
            <body xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="package com.softtek.acceleo.demo.security.controller;&#xA;&#xA;import java.util.Date;&#xA;import java.util.List;&#xA;import java.util.Map;&#xA;&#xA;import javax.servlet.http.HttpServletRequest;&#xA;import javax.servlet.http.HttpServletResponse;&#xA;&#xA;import org.slf4j.Logger;&#xA;import org.slf4j.LoggerFactory;&#xA;import org.springframework.beans.factory.annotation.Autowired;&#xA;import org.springframework.http.HttpHeaders;&#xA;import org.springframework.http.HttpStatus;&#xA;import org.springframework.http.ResponseEntity;&#xA;import org.springframework.security.access.prepost.PreAuthorize;&#xA;import org.springframework.web.bind.annotation.PathVariable;&#xA;import org.springframework.web.bind.annotation.RequestBody;&#xA;import org.springframework.web.bind.annotation.RequestMapping;&#xA;import org.springframework.web.bind.annotation.RequestMethod;&#xA;import org.springframework.web.bind.annotation.RequestParam;&#xA;import org.springframework.web.bind.annotation.ResponseBody;&#xA;import org.springframework.web.bind.annotation.RestController;&#xA;import org.springframework.web.util.UriComponentsBuilder;&#xA;&#xA;import com.softtek.acceleo.demo.domain.Authority;&#xA;import com.softtek.acceleo.demo.domain.AuthorityPrivilege;&#xA;import com.softtek.acceleo.demo.domain.UserAuthority;&#xA;import com.softtek.acceleo.demo.security.repository.AuthorityPrivilegeRepository;&#xA;import com.softtek.acceleo.demo.security.repository.UserAuthorityRepository;&#xA;import com.softtek.acceleo.demo.service.AuthorityService;&#xA;import com.softtek.acceleo.demo.service.UserService;&#xA;&#xA;@RestController&#xA;public class AuthorityController {&#xA;&#x9;private final Logger logger = LoggerFactory.getLogger(this.getClass());&#xA;&#x9;&#xA;&#x9;@Autowired&#xA;&#x9;private AuthorityService authorityService;&#xA;&#x9;&#xA;&#x9;@Autowired&#xA;&#x9;private AuthorityPrivilegeRepository authorityPrivilegeRepository;&#xA;&#x9;&#xA;&#x9;@Autowired&#xA;&#x9;private UserAuthorityRepository userAuthorityRepository;&#xA;&#x9;&#xA;&#x9;Authority authority = new Authority();&#xA;&#x9;&#xA;&#x9;@PreAuthorize(&quot;hasRole('AUTHORITYSEARCH')&quot;)&#xA;&#x9;@RequestMapping(value = &quot;/authority&quot;, method = RequestMethod.GET, produces = &quot;application/json&quot;)&#xA;&#x9;public @ResponseBody  List&lt;Authority> getAuthoritys(@RequestParam Map&lt;String,String> requestParams, HttpServletRequest request, HttpServletResponse response) {&#xA;&#xA;       &#x9;String query=requestParams.get(&quot;q&quot;);&#xA;&#x9;&#x9;int _page= requestParams.get(&quot;_page&quot;)==null?0:new Integer(requestParams.get(&quot;_page&quot;)).intValue();&#xA;&#x9;&#x9;long rows = 0;&#xA;&#xA;&#x9;&#x9;List&lt;Authority> listAuthority = null;&#xA;&#xA;&#x9;&#x9;if (query==null &amp;&amp; _page == 0 ) {&#xA;       &#x9;&#x9;//listAuthority = authorityService.listAuthorityss(authority);&#xA;&#x9;&#x9;&#x9;listAuthority = authorityService.listAuthoritys();&#xA;&#x9;&#x9;&#x9;rows = authorityService.getTotalRows();&#xA;&#x9;&#x9;} else if (query!= null){&#xA;&#x9;&#x9;&#x9;&#x9;listAuthority = authorityService.listAuthorityssQuery(authority, query, _page, 10);&#xA;&#x9;&#x9;&#x9;&#x9;rows = authorityService.getTotalRowsSearch(query);&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;} else if (_page != 0){&#xA;&#x9;&#x9;&#x9;listAuthority = authorityService.listAuthoritysPagination(authority, _page, 10);&#xA;&#x9;&#x9;&#x9;rows = authorityService.getTotalRows();&#xA;&#x9;&#x9;} &#x9;&#xA;&#xA;&#x9;&#x9;response.setHeader(&quot;Access-Control-Expose-Headers&quot;, &quot;x-total-count&quot;);&#xA;&#x9;&#x9;response.setHeader(&quot;x-total-count&quot;, String.valueOf(rows).toString());&#x9;&#xA;&#xA;&#x9;&#x9;return listAuthority;&#xA;&#x9;}&#xA;&#x9;&#xA;&#x9;@PreAuthorize(&quot;hasRole('AUTHORITYSEARCH')&quot;)&#xA;&#x9;@RequestMapping(value = &quot;/authority/catalog&quot;, method = RequestMethod.GET, produces = &quot;application/json&quot;)&#xA;&#x9;public @ResponseBody  List&lt;Authority> getAuthoritysCatalog(@RequestParam Map&lt;String,String> requestParams, HttpServletRequest request, HttpServletResponse response) {&#xA;&#xA;       &#x9;&#xA;&#x9;&#x9;List&lt;Authority> listAuthority = null;&#xA;&#xA;       &#x9;listAuthority = authorityService.listAuthorityss(authority);&#x9;&#xA;&#xA;&#x9;&#x9;return listAuthority;&#xA;&#x9;}&#xA;&#x9;&#xA;&#x9;&#xA;&#x9;&#xA;&#x9;@RequestMapping(value = &quot;/authority/{id}&quot;, method = RequestMethod.GET, produces = &quot;application/json&quot;)&#xA;&#x9;    public @ResponseBody  Authority getAuthority(@PathVariable(&quot;id&quot;) Long id) {&#xA;&#x9;        &#xA;&#x9;        authority.setIdAuthority(id);&#xA;&#x9;        &#xA;&#x9;        Authority authority = null;&#xA;&#x9;        authority = authorityService.getAuthority(id);&#xA;&#x9;&#x9;&#x9;return authority;&#xA;&#x9; }&#xA;&#xA;&#xA;&#xA;&#x9; @RequestMapping(value = &quot;/authority&quot;, method = RequestMethod.POST)&#xA;&#x9; @PreAuthorize(&quot;hasRole('AUTHORITYSEARCH')&quot;)&#xA;&#x9;    public ResponseEntity&lt;Void> createAuthority(@RequestBody Authority authority,    UriComponentsBuilder ucBuilder) {&#xA;&#x9;   &#xA;&#x9;&#x9; &#x9;authority.setCreationDate(new Date());&#xA;&#x9;        authorityService.addAuthority(authority);&#xA;&#x9; &#xA;&#x9;        HttpHeaders headers = new HttpHeaders();&#xA;&#x9;        headers.setLocation(ucBuilder.path(&quot;/authority/{id}&quot;).buildAndExpand(authority.getIdAuthority()).toUri());&#xA;&#x9;        return new ResponseEntity&lt;Void>(headers, HttpStatus.CREATED);&#xA;&#x9; }&#xA;&#x9;&#x9;&#xA;&#x9; @RequestMapping(value = &quot;/authority/{id}&quot;, method = RequestMethod.PUT)&#xA;&#x9; @PreAuthorize(&quot;hasRole('AUTHORITYUPDATE')&quot;)&#xA;&#x9;    public ResponseEntity&lt;Authority> actualizarAuthority(@PathVariable(&quot;id&quot;) Long id, @RequestBody Authority authority) {&#xA;&#x9;        &#xA;&#x9;        &#xA;&#x9;        Authority authorityFound = authorityService.getAuthority(id);&#xA;&#x9;         &#xA;&#x9;        if (authorityFound==null) {&#xA;&#x9;            System.out.println(&quot;User with id &quot; + id + &quot; not found&quot;);&#xA;&#x9;            return new ResponseEntity&lt;Authority>(HttpStatus.NOT_FOUND);&#xA;&#x9;        }&#xA;&#xA;&#x9;        &#xA;        &#x9;authorityFound.setIdAuthority(authority.getIdAuthority());&#xA;        &#x9;authorityFound.setName(authority.getName());&#xA;        &#x9;authorityFound.setEnabled(authority.getEnabled());&#xA;        &#x9;authorityFound.setCreationDate(new Date());&#xA;        &#x9;authorityFound.setModifiedDate(new Date());&#xA;&#x9;        &#xA;&#x9;        authorityService.editAuthority(authorityFound);&#x9;        &#xA;&#x9;        return new ResponseEntity&lt;Authority>(authorityFound, HttpStatus.OK);&#xA;&#x9;  } &#x9;&#xA;&#x9;&#xA;&#x9;&#x9;&#xA;&#x9;&#x9;@RequestMapping(value = &quot;/authority/{id}&quot;, method = RequestMethod.DELETE)&#xA;&#x9;&#x9;@PreAuthorize(&quot;hasRole('AUTHORITYDELETE')&quot;)&#xA;&#x9;    public ResponseEntity&lt;Authority> deleteAuthority(@PathVariable(&quot;id&quot;) Long id) {&#xA;&#x9;&#x9;&#x9; &#xA;&#x9;         Authority authority = authorityService.getAuthority(id);&#xA;&#x9;         if (authority == null) {&#xA;&#x9;             return new ResponseEntity&lt;Authority>(HttpStatus.NOT_FOUND);&#xA;&#x9;         }else {&#xA;&#x9;&#x9;         try {&#xA;&#x9;&#x9;        &#x9; /**Antes de borrar un authority, se debe validar que no este asociado a usuarios. **/&#xA;&#x9;&#x9;        &#x9; List&lt;UserAuthority> lstUserAuthority = userAuthorityRepository.findUserAuthorityByIdAuthority(authority);&#xA;&#x9;&#x9;        &#x9; &#xA;&#x9;&#x9;        &#x9; if( lstUserAuthority == null || lstUserAuthority.isEmpty() ) {&#xA;&#x9;&#x9;&#x9;        &#x9; authorityPrivilegeRepository.deleteAuthorities(authority);&#xA;&#x9;&#x9;&#x9;        &#x9; &#xA;&#x9;&#x9;&#x9;        &#x9; authorityService.deleteAuthority(authority);&#xA;&#x9;&#x9;            &#x9; return new ResponseEntity&lt;Authority>(HttpStatus.OK);&#x9;&#x9;        &#x9;&#x9; &#xA;&#x9;&#x9;        &#x9; }else {&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;logger.error(&quot;Error: El Authority no se puede eliminar debido a que esta asociado con usuarios.&quot;);&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;throw new Exception(&quot;El Authority no se puede eliminar debido a que esta asociado con usuarios&quot;);&#xA;&#x9;&#x9;        &#x9; }&#xA;&#x9;&#x9;&#x9;&#x9;} catch (Exception e) {&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;logger.error(&quot;Error: &quot;, e);&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;return new ResponseEntity&lt;Authority>(HttpStatus.PRECONDITION_FAILED);&#xA;&#x9;&#x9;&#x9;&#x9;}&#xA;&#x9;         }&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;}&#xA;}&#xA;"/>
            <fileUrl xsi:type="ocl.ecore:OperationCallExp">
              <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
              <source xsi:type="ocl.ecore:OperationCallExp">
                <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                <source xsi:type="ocl.ecore:OperationCallExp">
                  <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                  <source xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="main/java/">
                    <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                  </source>
                  <argument xsi:type="ocl.ecore:OperationCallExp" referredOperation="/1/oclstdlib_String_Class/replaceAll">
                    <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                    <source xsi:type="ocl.ecore:PropertyCallExp">
                      <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                      <source xsi:type="ocl.ecore:VariableExp" name="p" referredVariable="/0/generateElementController/%.1/p">
                        <eType xsi:type="ecore:EClass" href="http://www.eclipse.org/uml2/5.0.0/UML#//Package"/>
                      </source>
                      <referredProperty xsi:type="ecore:EAttribute" href="http://www.eclipse.org/uml2/5.0.0/UML#//NamedElement/name"/>
                    </source>
                    <argument xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="\.">
                      <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                    </argument>
                    <argument xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="/">
                      <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                    </argument>
                  </argument>
                  <referredOperation xsi:type="ecore:EOperation" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String_Class/concat"/>
                </source>
                <argument xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="/controller/">
                  <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                </argument>
                <referredOperation xsi:type="ecore:EOperation" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String_Class/concat"/>
              </source>
              <argument xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="AuthorityController.java">
                <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
              </argument>
              <referredOperation xsi:type="ecore:EOperation" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String_Class/concat"/>
            </fileUrl>
          </body>
          <body xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="&#xA;"/>
          <body xsi:type="mtl:FileBlock" openMode="OverWrite">
            <body xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="package com.softtek.acceleo.demo.security.controller;&#xA;&#xA;import org.springframework.http.ResponseEntity;&#xA;import org.springframework.security.access.prepost.PreAuthorize;&#xA;import org.springframework.web.bind.annotation.RequestMapping;&#xA;import org.springframework.web.bind.annotation.RequestMethod;&#xA;import org.springframework.web.bind.annotation.RestController;&#xA;&#xA;@RestController&#xA;@RequestMapping(&quot;protected&quot;)&#xA;public class MethodProtectedRestController {&#xA;&#xA;    /**&#xA;     * This is an example of some different kinds of granular restriction for endpoints. You can use the built-in SPEL expressions&#xA;     * in @PreAuthorize such as 'hasRole()' to determine if a user has access. Remember that the hasRole expression assumes a&#xA;     * 'ROLE_' prefix on all role names. So 'ADMIN' here is actually stored as 'ROLE_ADMIN' in database!&#xA;     **/&#xA;    @RequestMapping(method = RequestMethod.GET)&#xA;    @PreAuthorize(&quot;hasRole('ADMIN')&quot;)&#xA;    public ResponseEntity&lt;?> getProtectedGreeting() {&#xA;        return ResponseEntity.ok(&quot;Greetings from admin protected method!&quot;);&#xA;    }&#xA;&#xA;}&#xA;"/>
            <fileUrl xsi:type="ocl.ecore:OperationCallExp">
              <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
              <source xsi:type="ocl.ecore:OperationCallExp">
                <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                <source xsi:type="ocl.ecore:OperationCallExp">
                  <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                  <source xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="main/java/">
                    <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                  </source>
                  <argument xsi:type="ocl.ecore:OperationCallExp" referredOperation="/1/oclstdlib_String_Class/replaceAll">
                    <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                    <source xsi:type="ocl.ecore:PropertyCallExp">
                      <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                      <source xsi:type="ocl.ecore:VariableExp" name="p" referredVariable="/0/generateElementController/%.1/p">
                        <eType xsi:type="ecore:EClass" href="http://www.eclipse.org/uml2/5.0.0/UML#//Package"/>
                      </source>
                      <referredProperty xsi:type="ecore:EAttribute" href="http://www.eclipse.org/uml2/5.0.0/UML#//NamedElement/name"/>
                    </source>
                    <argument xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="\.">
                      <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                    </argument>
                    <argument xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="/">
                      <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                    </argument>
                  </argument>
                  <referredOperation xsi:type="ecore:EOperation" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String_Class/concat"/>
                </source>
                <argument xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="/controller/">
                  <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                </argument>
                <referredOperation xsi:type="ecore:EOperation" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String_Class/concat"/>
              </source>
              <argument xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="MethodProtectedRestController.java">
                <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
              </argument>
              <referredOperation xsi:type="ecore:EOperation" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String_Class/concat"/>
            </fileUrl>
          </body>
          <body xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="&#xA;"/>
          <body xsi:type="mtl:FileBlock" openMode="OverWrite">
            <body xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="package com.softtek.acceleo.demo.security.controller;&#xA;&#xA;import java.util.ArrayList;&#xA;import java.util.Date;&#xA;import java.util.List;&#xA;&#xA;import javax.servlet.http.HttpServletRequest;&#xA;import javax.servlet.http.HttpServletResponse;&#xA;&#xA;import org.hibernate.HibernateException;&#xA;import org.slf4j.Logger;&#xA;import org.slf4j.LoggerFactory;&#xA;import org.springframework.beans.factory.annotation.Autowired;&#xA;import org.springframework.http.HttpHeaders;&#xA;import org.springframework.http.HttpStatus;&#xA;import org.springframework.http.ResponseEntity;&#xA;import org.springframework.security.access.prepost.PreAuthorize;&#xA;import org.springframework.security.crypto.password.PasswordEncoder;&#xA;import org.springframework.web.bind.annotation.PathVariable;&#xA;import org.springframework.web.bind.annotation.RequestBody;&#xA;import org.springframework.web.bind.annotation.RequestMapping;&#xA;import org.springframework.web.bind.annotation.RequestMethod;&#xA;import org.springframework.web.bind.annotation.ResponseBody;&#xA;import org.springframework.web.bind.annotation.RestController;&#xA;import org.springframework.web.util.UriComponentsBuilder;&#xA;&#xA;import com.softtek.acceleo.demo.domain.Authority;&#xA;import com.softtek.acceleo.demo.domain.User;&#xA;import com.softtek.acceleo.demo.service.UserService;&#xA;&#xA;&#xA;&#xA;@RestController&#xA;public class UserController {&#xA;&#x9;private final Logger logger = LoggerFactory.getLogger(this.getClass());&#xA;&#xA;&#x9;&#xA;&#x9;&#x9;@Autowired&#xA;&#x9;&#x9;private UserService userService;&#xA;&#x9;&#x9;&#xA;&#x9;&#x9;@Autowired&#xA;&#x9;    public PasswordEncoder passwordEncoder;&#xA;&#x9;&#x9;@PreAuthorize(&quot;hasRole('MANAGESEARCH')&quot;)&#xA;&#x9;   @RequestMapping(value = &quot;/usersList&quot;, method = RequestMethod.GET, produces = &quot;application/json&quot;)&#xA;&#x9;    public @ResponseBody  List&lt;User> getUsers(HttpServletRequest request, HttpServletResponse response) {&#xA;&#xA;&#x9;&#x9;&#x9;List&lt;User> listUser = null;&#xA;&#x9;       &#x9;listUser = userService.listUserss();&#xA;&#x9;       &#x9;&#xA;//&#x9;       &#x9;Set&lt;User> hs = new HashSet&lt;User>();&#xA;//&#x9;       &#x9;hs.addAll(listUser);&#xA;//&#x9;       &#x9;listUser.clear();&#xA;//&#x9;       &#x9;listUser.addAll(hs);&#xA;&#x9;       &#x9;&#xA;&#x9;       &#x9;for (User u:listUser){&#x9;&#xA;&#x9;       &#x9;&#x9;// Hay que decodificar el password&#xA;&#x9;       &#x9;}&#xA;&#x9;       &#x9;&#xA;&#x9;       &#x9;&#xA;&#x9;&#x9;&#x9;System.out.print(&quot;Conttroller - Cantidad&quot; + listUser.size());&#xA;&#x9;&#x9;&#x9;System.out.print(&quot;Fin Conttroller - userList &quot;);&#xA;&#x9;&#x9;&#x9;return listUser;&#xA;&#x9;&#x9;}&#xA;&#x9;    &#xA;&#x9;    &#xA;&#x9;    /**&#xA;&#x9;    * Crea un nuevo usuario.&#xA;&#x9;    * @param afiliado.&#xA;&#x9;    * @param ucBuilder.&#xA;&#x9;    * @return ResponseEntity.&#xA;&#x9;    */&#xA;&#xA;&#x9;    &#xA;&#x9;    @RequestMapping(value = &quot;/users/{username}/{privileges}&quot;, method = RequestMethod.POST)&#xA;&#x9;    @PreAuthorize(&quot;hasRole('MANAGESEARCH')&quot;)&#xA;&#x9;        public ResponseEntity&lt;Void> createAfiliado(@RequestBody User user, @PathVariable(&quot;username&quot;) String userName,  @PathVariable(&quot;privileges&quot;) String privileges, UriComponentsBuilder ucBuilder) {&#xA;&#x9;    &#x9;HttpStatus httpStatus = null;&#xA;&#x9;    &#x9;&#xA;&#x9;            user.setCreationDate(new Date()); &#xA;&#x9;            user.setPassword(passwordEncoder.encode(user.getPassword()));&#xA;&#x9;            user.setUserName(userName);&#xA;&#x9;            user.setLastPasswordResetDate(new Date());&#xA;&#x9;            &#xA;&#x9;            List&lt;Authority> auths = new ArrayList&lt;>();&#xA;&#x9;            Authority auth = new Authority();&#xA;&#x9;            auth.setIdAuthority(new Long(privileges));&#xA;&#x9;            auths.add(auth);&#xA;&#x9;            &#xA;&#x9;            user.setAuthorities(auths);&#xA;&#x9;                &#xA;&#x9;            &#xA;&#x9;            try {&#xA;&#x9;            &#x9;userService.addUser(user);&#xA;&#x9;            &#x9;&#xA;&#x9;            &#x9;httpStatus = HttpStatus.CREATED;&#xA;&#x9;            }catch(HibernateException e) {&#xA;&#x9;            &#x9;logger.error(&quot;---->>> Error: &quot;, e);&#xA;&#x9;            &#x9;httpStatus = HttpStatus.NOT_ACCEPTABLE;&#xA;&#x9;            }catch(Exception e) {&#xA;&#x9;            &#x9;logger.error(&quot;---->>> Error: &quot;, e);&#xA;&#x9;            &#x9;httpStatus = HttpStatus.NOT_ACCEPTABLE;&#xA;&#x9;            }&#x9;            &#xA;&#x9;     &#xA;&#x9;            HttpHeaders headers = new HttpHeaders();&#xA;&#x9;            headers.setLocation(ucBuilder.path(&quot;/users/{id}&quot;).buildAndExpand(user.getIdUser()).toUri());&#xA;&#x9;            return new ResponseEntity&lt;Void>(headers, httpStatus);&#xA;&#x9;    }&#xA;&#x9;    &#xA;&#x9;&#x9;&#xA;&#x9;&#x9;@RequestMapping(value = &quot;/users/{id}&quot;, method = RequestMethod.DELETE)&#xA;&#x9;&#x9;@PreAuthorize(&quot;hasRole('USERDELETE')&quot;)&#xA;&#x9;    public ResponseEntity&lt;User> deleteUser(@PathVariable(&quot;id&quot;) int id) {&#xA;&#x9;&#x9;&#x9; &#xA;&#x9;         User user = userService.getUser(new Long(id));&#xA;&#x9;         if (user == null) {&#xA;&#x9;             return new ResponseEntity&lt;User>(HttpStatus.NOT_FOUND);&#xA;&#x9;         }&#xA;&#x9;  &#xA;&#x9;         try {&#xA;&#x9;        &#x9; userService.deleteUser(user);&#xA;            &#x9; return new ResponseEntity&lt;User>(HttpStatus.OK);&#xA;&#x9;&#x9;&#x9;} catch (Exception e) {&#xA;&#x9;&#x9;&#x9;&#x9;return new ResponseEntity&lt;User>(HttpStatus.PRECONDITION_FAILED);&#xA;&#x9;&#x9;&#x9;}&#xA;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;}&#xA;&#x9;&#x9;&#xA;&#x9;&#x9; @RequestMapping(value = &quot;/users/{id}/{username}/{privileges}/{flag}&quot;, method = RequestMethod.PUT)&#xA;&#x9;&#x9; @PreAuthorize(&quot;hasRole('MANAGESEARCH')&quot;)&#xA;&#x9;&#x9;    public ResponseEntity&lt;User> actualizarUser( @RequestBody User user, @PathVariable(&quot;id&quot;) int id, @PathVariable(&quot;username&quot;) String username,  &#xA;&#x9;&#x9;    &#x9;&#x9;@PathVariable(&quot;privileges&quot;) String privileges, @PathVariable(&quot;flag&quot;) Boolean flag) {&#xA;&#x9;&#x9;        &#xA;&#x9;&#x9;        User userFound = userService.getUser(new Long(id));&#xA;&#x9;&#x9;         &#xA;&#x9;&#x9;        if (userFound==null) {&#xA;&#x9;&#x9;            System.out.println(&quot;User with id &quot; + id + &quot; not found&quot;);&#xA;&#x9;&#x9;            return new ResponseEntity&lt;User>(HttpStatus.NOT_FOUND);&#xA;&#x9;&#x9;        }&#xA;&#xA;&#x9;&#x9;        if (flag){&#xA;&#x9;&#x9;        &#x9;String pass = passwordEncoder.encode(user.getPassword());&#xA;&#x9;&#x9;        &#x9;user.setPassword(pass);&#xA;&#x9;&#x9;        }&#xA;&#x9;&#x9;       &#xA;&#x9;&#x9;        try {&#xA;&#x9;&#x9;&#x9;        List&lt;Authority> auths = new ArrayList&lt;>();&#xA;&#x9;                Authority auth = new Authority();&#xA;&#x9;                auth.setIdAuthority(new Long(privileges));&#xA;&#x9;                auths.add(auth);&#xA;&#x9;&#x9;&#x9;        &#xA;&#x9;&#x9;&#x9;        userFound.setAuthorities(auths);&#xA;&#x9;&#x9;&#x9;        userFound.setCreationDate(new Date());&#xA;&#x9;&#x9;&#x9;        userFound.setEmail(user.getEmail());&#xA;&#x9;&#x9;&#x9;        userFound.setEnabled(user.getEnabled());&#xA;&#x9;&#x9;&#x9;        userFound.setFirstname(user.getFirstname());&#xA;&#x9;&#x9;&#x9;        userFound.setLastname(user.getLastname());&#xA;&#x9;&#x9;&#x9;        userFound.setLastPasswordResetDate(new Date());&#xA;&#x9;&#x9;&#x9;        userFound.setModifiedDate(new Date());&#xA;&#x9;&#x9;&#x9;        userFound.setUserName(username);&#xA;&#x9;&#x9;&#x9;        userFound.setIdUser(new Long(user.getIdUser()));&#xA;&#x9;&#x9;&#x9;        userFound.setPassword(user.getPassword());&#xA;&#x9;&#x9;&#x9;        &#xA;&#x9;&#x9;&#x9;        userService.editUser(userFound);&#xA;&#x9;&#x9;&#x9;        &#xA;&#x9;&#x9;&#x9;        return new ResponseEntity&lt;User>(userFound, HttpStatus.OK);&#xA;&#x9;&#x9;        }catch(Exception e) {&#xA;&#x9;&#x9;        &#x9;return new ResponseEntity&lt;User>(userFound, HttpStatus.NOT_ACCEPTABLE);&#xA;&#x9;&#x9;        }&#xA;&#x9;&#x9;  } &#x9;&#xA;}&#xA;"/>
            <fileUrl xsi:type="ocl.ecore:OperationCallExp">
              <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
              <source xsi:type="ocl.ecore:OperationCallExp">
                <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                <source xsi:type="ocl.ecore:OperationCallExp">
                  <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                  <source xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="main/java/">
                    <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                  </source>
                  <argument xsi:type="ocl.ecore:OperationCallExp" referredOperation="/1/oclstdlib_String_Class/replaceAll">
                    <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                    <source xsi:type="ocl.ecore:PropertyCallExp">
                      <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                      <source xsi:type="ocl.ecore:VariableExp" name="p" referredVariable="/0/generateElementController/%.1/p">
                        <eType xsi:type="ecore:EClass" href="http://www.eclipse.org/uml2/5.0.0/UML#//Package"/>
                      </source>
                      <referredProperty xsi:type="ecore:EAttribute" href="http://www.eclipse.org/uml2/5.0.0/UML#//NamedElement/name"/>
                    </source>
                    <argument xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="\.">
                      <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                    </argument>
                    <argument xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="/">
                      <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                    </argument>
                  </argument>
                  <referredOperation xsi:type="ecore:EOperation" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String_Class/concat"/>
                </source>
                <argument xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="/controller/">
                  <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                </argument>
                <referredOperation xsi:type="ecore:EOperation" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String_Class/concat"/>
              </source>
              <argument xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="UserController.java">
                <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
              </argument>
              <referredOperation xsi:type="ecore:EOperation" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String_Class/concat"/>
            </fileUrl>
          </body>
          <body xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="&#xA;"/>
          <body xsi:type="mtl:FileBlock" openMode="OverWrite">
            <body xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="package com.softtek.acceleo.demo.security.controller;&#xA;&#xA;import java.util.ArrayList;&#xA;import java.util.Date;&#xA;import java.util.HashSet;&#xA;import java.util.List;&#xA;import java.util.Map;&#xA;import java.util.Set;&#xA;&#xA;import javax.servlet.http.HttpServletRequest;&#xA;import javax.servlet.http.HttpServletResponse;&#xA;&#xA;import org.slf4j.Logger;&#xA;import org.slf4j.LoggerFactory;&#xA;import org.springframework.beans.factory.annotation.Autowired;&#xA;import org.springframework.beans.factory.annotation.Qualifier;&#xA;import org.springframework.beans.factory.annotation.Value;&#xA;import org.springframework.context.annotation.Bean;&#xA;import org.springframework.http.HttpHeaders;&#xA;import org.springframework.http.HttpStatus;&#xA;import org.springframework.http.ResponseEntity;&#xA;import org.springframework.security.access.prepost.PreAuthorize;&#xA;import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;&#xA;import org.springframework.security.crypto.password.PasswordEncoder;&#xA;import org.springframework.security.core.userdetails.UserDetailsService;&#xA;import org.springframework.web.bind.annotation.PathVariable;&#xA;import org.springframework.web.bind.annotation.RequestBody;&#xA;import org.springframework.web.bind.annotation.RequestMapping;&#xA;import org.springframework.web.bind.annotation.RequestMethod;&#xA;import org.springframework.web.bind.annotation.RequestParam;&#xA;import org.springframework.web.bind.annotation.ResponseBody;&#xA;import org.springframework.web.bind.annotation.RestController;&#xA;import org.springframework.web.util.UriComponentsBuilder;&#xA;&#xA;import com.softtek.acceleo.demo.domain.Afiliado;&#xA;import com.softtek.acceleo.demo.domain.Authority;&#xA;import com.softtek.acceleo.demo.domain.User;&#xA;import com.softtek.acceleo.demo.security.JwtTokenUtil;&#xA;import com.softtek.acceleo.demo.security.JwtUser;&#xA;import com.softtek.acceleo.demo.service.UserService;&#xA;&#xA;@RestController&#xA;public class UserRestController {&#xA;&#x9;private final Logger logger = LoggerFactory.getLogger(this.getClass());&#xA;&#x9;&#xA;    @Value(&quot;${jwt.header}&quot;)&#xA;    private String tokenHeader;&#xA;&#xA;    @Autowired&#xA;    private JwtTokenUtil jwtTokenUtil;&#xA;    &#xA;&#x9;@Autowired&#xA;&#x9;private UserService userService;&#xA;&#x9;&#xA;&#x9;User user = new User();&#xA;&#x9;&#xA;&#x9;@Autowired&#xA;    public PasswordEncoder passwordEncoder;&#xA;&#xA;    @Autowired&#xA;    @Qualifier(&quot;jwtUserDetailsService&quot;)&#xA;    private UserDetailsService userDetailsService;&#xA;&#xA;    @RequestMapping(value = &quot;user&quot;, method = RequestMethod.GET)&#xA;    public JwtUser getAuthenticatedUser(HttpServletRequest request) {&#xA;    &#x9;logger.info(&quot;User REST :&quot;+tokenHeader);&#xA;        String token = request.getHeader(tokenHeader).substring(7);&#xA;        String username = jwtTokenUtil.getUsernameFromToken(token);&#xA;        JwtUser user = (JwtUser) userDetailsService.loadUserByUsername(username);&#xA;        return user;&#xA;    }&#xA;}&#xA;"/>
            <fileUrl xsi:type="ocl.ecore:OperationCallExp">
              <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
              <source xsi:type="ocl.ecore:OperationCallExp">
                <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                <source xsi:type="ocl.ecore:OperationCallExp">
                  <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                  <source xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="main/java/">
                    <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                  </source>
                  <argument xsi:type="ocl.ecore:OperationCallExp" referredOperation="/1/oclstdlib_String_Class/replaceAll">
                    <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                    <source xsi:type="ocl.ecore:PropertyCallExp">
                      <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                      <source xsi:type="ocl.ecore:VariableExp" name="p" referredVariable="/0/generateElementController/%.1/p">
                        <eType xsi:type="ecore:EClass" href="http://www.eclipse.org/uml2/5.0.0/UML#//Package"/>
                      </source>
                      <referredProperty xsi:type="ecore:EAttribute" href="http://www.eclipse.org/uml2/5.0.0/UML#//NamedElement/name"/>
                    </source>
                    <argument xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="\.">
                      <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                    </argument>
                    <argument xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="/">
                      <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                    </argument>
                  </argument>
                  <referredOperation xsi:type="ecore:EOperation" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String_Class/concat"/>
                </source>
                <argument xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="/controller/">
                  <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
                </argument>
                <referredOperation xsi:type="ecore:EOperation" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String_Class/concat"/>
              </source>
              <argument xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="UserRestController.java">
                <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
              </argument>
              <referredOperation xsi:type="ecore:EOperation" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String_Class/concat"/>
            </fileUrl>
          </body>
          <body xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="&#xA;"/>
          <ifExpr xsi:type="ocl.ecore:OperationCallExp" referredOperation="/1/oclstdlib_String_Class/equalsIgnoreCase">
            <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/Boolean"/>
            <source xsi:type="ocl.ecore:PropertyCallExp">
              <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
              <source xsi:type="ocl.ecore:VariableExp" name="p" referredVariable="/0/generateElementController/%.1/p">
                <eType xsi:type="ecore:EClass" href="http://www.eclipse.org/uml2/5.0.0/UML#//Package"/>
              </source>
              <referredProperty xsi:type="ecore:EAttribute" href="http://www.eclipse.org/uml2/5.0.0/UML#//NamedElement/name"/>
            </source>
            <argument xsi:type="ocl.ecore:StringLiteralExp" stringSymbol="com.softtek.acceleo.demo.security">
              <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
            </argument>
          </ifExpr>
        </body>
        <loopVariable name="p">
          <eType xsi:type="ecore:EClass" href="http://www.eclipse.org/uml2/5.0.0/UML#//Package"/>
        </loopVariable>
        <iterSet xsi:type="ocl.ecore:OperationCallExp" eType="/6/Set(Package)" referredOperation="/1/oclstdlib_Collection(T)_Class/filter">
          <source xsi:type="ocl.ecore:PropertyCallExp" eType="/6/Set(PackageableElement)">
            <source xsi:type="ocl.ecore:VariableExp" name="aModel" referredVariable="/0/generateElementController/aModel">
              <eType xsi:type="ecore:EClass" href="http://www.eclipse.org/uml2/5.0.0/UML#//Model"/>
            </source>
            <referredProperty xsi:type="ecore:EReference" href="http://www.eclipse.org/uml2/5.0.0/UML#//Package/packagedElement"/>
          </source>
          <argument xsi:type="ocl.ecore:TypeExp" eType="/7/Package">
            <referredType xsi:type="ecore:EClass" href="http://www.eclipse.org/uml2/5.0.0/UML#//Package"/>
          </argument>
        </iterSet>
      </body>
      <parameter name="aModel">
        <eType xsi:type="ecore:EClass" href="http://www.eclipse.org/uml2/5.0.0/UML#//Model"/>
      </parameter>
    </ownedModuleElement>
  </mtl:Module>
  <ecore:EPackage name="additions">
    <eClassifiers xsi:type="ecore:EClass" name="oclstdlib_String_Class">
      <eAnnotations source="http://www.eclipse.org/ocl/1.1.0/OCL">
        <references href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
      </eAnnotations>
      <eOperations name="replaceAll">
        <eAnnotations source="MTL non-standard"/>
        <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
        <eParameters name="substring">
          <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
        </eParameters>
        <eParameters name="replacement">
          <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
        </eParameters>
      </eOperations>
      <eOperations name="equalsIgnoreCase">
        <eAnnotations source="MTL non-standard"/>
        <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/Boolean"/>
        <eParameters name="other">
          <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
        </eParameters>
      </eOperations>
    </eClassifiers>
    <eClassifiers xsi:type="ecore:EClass" name="oclstdlib_Integer_Class">
      <eAnnotations source="http://www.eclipse.org/ocl/1.1.0/OCL">
        <references href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/Integer"/>
      </eAnnotations>
    </eClassifiers>
    <eClassifiers xsi:type="ecore:EClass" name="oclstdlib_Real_Class">
      <eAnnotations source="http://www.eclipse.org/ocl/1.1.0/OCL">
        <references href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/Real"/>
      </eAnnotations>
    </eClassifiers>
    <eClassifiers xsi:type="ecore:EClass" name="ecore_EObject_Class">
      <eAnnotations source="http://www.eclipse.org/ocl/1.1.0/OCL">
        <references href="http://www.eclipse.org/emf/2002/Ecore#//EObject"/>
      </eAnnotations>
      <eOperations name="generateElementController">
        <eAnnotations source="http://www.eclipse.org/ocl/1.1.0/OCL">
          <contents xsi:type="ocl.ecore:Constraint"/>
        </eAnnotations>
        <eAnnotations source="MTL" references="/0/generateElementController"/>
        <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
        <eParameters name="aModel">
          <eType xsi:type="ecore:EClass" href="http://www.eclipse.org/uml2/5.0.0/UML#//Model"/>
        </eParameters>
      </eOperations>
    </eClassifiers>
    <eClassifiers xsi:type="ecore:EClass" name="oclstdlib_OclAny_Class">
      <eAnnotations source="http://www.eclipse.org/ocl/1.1.0/OCL">
        <references href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/OclAny"/>
      </eAnnotations>
    </eClassifiers>
    <eClassifiers xsi:type="ecore:EClass" name="oclstdlib_Collection(T)_Class">
      <eAnnotations source="http://www.eclipse.org/ocl/1.1.0/OCL">
        <references href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/Collection(T)"/>
      </eAnnotations>
      <eOperations name="filter">
        <eAnnotations source="MTL non-standard"/>
        <eType xsi:type="ocl.ecore:CollectionType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/Collection(T)"/>
        <eParameters name="filter">
          <eType xsi:type="ocl.ecore:TypeType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/OclType"/>
        </eParameters>
      </eOperations>
    </eClassifiers>
    <eClassifiers xsi:type="ecore:EClass" name="oclstdlib_Sequence(T)_Class">
      <eAnnotations source="http://www.eclipse.org/ocl/1.1.0/OCL">
        <references href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/Sequence(T)"/>
      </eAnnotations>
    </eClassifiers>
    <eClassifiers xsi:type="ecore:EClass" name="oclstdlib_OrderedSet(T)_Class">
      <eAnnotations source="http://www.eclipse.org/ocl/1.1.0/OCL">
        <references href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/OrderedSet(T)"/>
      </eAnnotations>
    </eClassifiers>
    <eClassifiers xsi:type="ecore:EClass" name="uml_Model_Class">
      <eAnnotations source="http://www.eclipse.org/ocl/1.1.0/OCL">
        <references href="http://www.eclipse.org/uml2/5.0.0/UML#//Model"/>
      </eAnnotations>
    </eClassifiers>
  </ecore:EPackage>
  <ocl.ecore:Variable name="self">
    <eType xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EObject"/>
  </ocl.ecore:Variable>
  <ocl.ecore:Variable name="self">
    <eType xsi:type="ecore:EClass" href="http://www.eclipse.org/uml2/5.0.0/UML#//Model"/>
  </ocl.ecore:Variable>
  <ocl.ecore:Variable name="self">
    <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/String"/>
  </ocl.ecore:Variable>
  <ocl.ecore:Variable name="self">
    <eType xsi:type="ecore:EClass" href="http://www.eclipse.org/uml2/5.0.0/UML#//Model"/>
  </ocl.ecore:Variable>
  <ecore:EPackage name="collections">
    <eClassifiers xsi:type="ocl.ecore:SetType" name="Set(PackageableElement)" instanceClassName="java.util.Set">
      <elementType xsi:type="ecore:EClass" href="http://www.eclipse.org/uml2/5.0.0/UML#//PackageableElement"/>
    </eClassifiers>
    <eClassifiers xsi:type="ocl.ecore:SetType" name="Set(Package)" instanceClassName="java.util.Set">
      <elementType xsi:type="ecore:EClass" href="http://www.eclipse.org/uml2/5.0.0/UML#//Package"/>
    </eClassifiers>
  </ecore:EPackage>
  <ecore:EPackage name="types">
    <eClassifiers xsi:type="ocl.ecore:TypeType" name="Package">
      <referredType xsi:type="ecore:EClass" href="http://www.eclipse.org/uml2/5.0.0/UML#//Package"/>
    </eClassifiers>
  </ecore:EPackage>
  <ocl.ecore:Variable name="self">
    <eType xsi:type="ecore:EClass" href="http://www.eclipse.org/uml2/5.0.0/UML#//Model"/>
  </ocl.ecore:Variable>
  <ocl.ecore:Variable name="self">
    <eType xsi:type="ecore:EClass" href="http://www.eclipse.org/uml2/5.0.0/UML#//Package"/>
  </ocl.ecore:Variable>
  <ocl.ecore:Variable name="self">
    <eType xsi:type="ecore:EClass" href="http://www.eclipse.org/uml2/5.0.0/UML#//Package"/>
  </ocl.ecore:Variable>
  <ocl.ecore:Variable name="self">
    <eType xsi:type="ecore:EClass" href="http://www.eclipse.org/uml2/5.0.0/UML#//Package"/>
  </ocl.ecore:Variable>
  <ocl.ecore:Variable name="self">
    <eType xsi:type="ecore:EClass" href="http://www.eclipse.org/uml2/5.0.0/UML#//Package"/>
  </ocl.ecore:Variable>
  <ocl.ecore:Variable name="self">
    <eType xsi:type="ecore:EClass" href="http://www.eclipse.org/uml2/5.0.0/UML#//Package"/>
  </ocl.ecore:Variable>
  <ocl.ecore:Variable name="self">
    <eType xsi:type="ecore:EClass" href="http://www.eclipse.org/uml2/5.0.0/UML#//Package"/>
  </ocl.ecore:Variable>
  <ocl.ecore:Variable name="self">
    <eType xsi:type="ecore:EClass" href="http://www.eclipse.org/uml2/5.0.0/UML#//Package"/>
  </ocl.ecore:Variable>
  <ocl.ecore:Variable name="self">
    <eType xsi:type="ecore:EClass" href="http://www.eclipse.org/uml2/5.0.0/UML#//Package"/>
  </ocl.ecore:Variable>
  <ocl.ecore:Variable name="self">
    <eType xsi:type="ecore:EClass" href="http://www.eclipse.org/uml2/5.0.0/UML#//Model"/>
  </ocl.ecore:Variable>
  <ocl.ecore:Variable name="i">
    <eType xsi:type="ocl.ecore:PrimitiveType" href="http://www.eclipse.org/ocl/1.1.0/oclstdlib.ecore#/0/Integer"/>
  </ocl.ecore:Variable>
  <ocl.ecore:Variable name="self">
    <eType xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EObject"/>
  </ocl.ecore:Variable>
  <ecore:EAnnotation source="positions">
    <eAnnotations source="positions.0" references="/0/generateElementController">
      <details key="start" value="92"/>
      <details key="end" value="25285"/>
      <details key="line" value="5"/>
    </eAnnotations>
    <eAnnotations source="positions.1" references="/0/generateElementController/%">
      <details key="start" value="170"/>
      <details key="end" value="171"/>
      <details key="line" value="7"/>
    </eAnnotations>
    <eAnnotations source="positions.2" references="/0/generateElementController/%.1">
      <details key="start" value="171"/>
      <details key="end" value="25273"/>
      <details key="line" value="8"/>
    </eAnnotations>
    <eAnnotations source="positions.3" references="/0/generateElementController/%.1/%">
      <details key="start" value="233"/>
      <details key="end" value="25266"/>
      <details key="line" value="9"/>
    </eAnnotations>
    <eAnnotations source="positions.4" references="/0/generateElementController/%.1/%/%">
      <details key="start" value="300"/>
      <details key="end" value="301"/>
      <details key="line" value="9"/>
    </eAnnotations>
    <eAnnotations source="positions.5" references="/0/generateElementController/%.1/%/%.1">
      <details key="start" value="301"/>
      <details key="end" value="2605"/>
      <details key="line" value="11"/>
    </eAnnotations>
    <eAnnotations source="positions.6" references="/0/generateElementController/%.1/%/%.1/%">
      <details key="start" value="439"/>
      <details key="end" value="2598"/>
      <details key="line" value="12"/>
    </eAnnotations>
    <eAnnotations source="positions.7" references="/0/generateElementController/%.1/%/%.1/%.1">
      <details key="start" value="308"/>
      <details key="end" value="418"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.8" references="/0/generateElementController/%.1/%/%.1/%.1/%">
      <details key="start" value="308"/>
      <details key="end" value="380"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.9" references="/0/generateElementController/%.1/%/%.1/%.1/%/%">
      <details key="start" value="308"/>
      <details key="end" value="357"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.10" references="/0/generateElementController/%.1/%/%.1/%.1/%/%/%">
      <details key="start" value="308"/>
      <details key="end" value="320"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.11" references="/0/generateElementController/%.1/%/%.1/%.1/%/%/%.1">
      <details key="start" value="328"/>
      <details key="end" value="356"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.12" references="/0/generateElementController/%.1/%/%.1/%.1/%/%/%.1/%">
      <details key="start" value="328"/>
      <details key="end" value="334"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.13" references="/0/generateElementController/%.1/%/%.1/%.1/%/%/%.1/%/p">
      <details key="start" value="328"/>
      <details key="end" value="329"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.14" references="/0/generateElementController/%.1/%/%.1/%.1/%/%/%.1/%.1">
      <details key="start" value="346"/>
      <details key="end" value="351"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.15" references="/0/generateElementController/%.1/%/%.1/%.1/%/%/%.1/%.2">
      <details key="start" value="352"/>
      <details key="end" value="355"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.16" references="/0/generateElementController/%.1/%/%.1/%.1/%/%.1">
      <details key="start" value="365"/>
      <details key="end" value="379"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.17" references="/0/generateElementController/%.1/%/%.1/%.1/%.1">
      <details key="start" value="388"/>
      <details key="end" value="417"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.18" references="/0/generateElementController/%.1/%/%.2">
      <details key="start" value="2606"/>
      <details key="end" value="2607"/>
      <details key="line" value="79"/>
    </eAnnotations>
    <eAnnotations source="positions.19" references="/0/generateElementController/%.1/%/%.3">
      <details key="start" value="2607"/>
      <details key="end" value="7672"/>
      <details key="line" value="80"/>
    </eAnnotations>
    <eAnnotations source="positions.20" references="/0/generateElementController/%.1/%/%.3/%">
      <details key="start" value="2751"/>
      <details key="end" value="7665"/>
      <details key="line" value="81"/>
    </eAnnotations>
    <eAnnotations source="positions.21" references="/0/generateElementController/%.1/%/%.3/%.1">
      <details key="start" value="2614"/>
      <details key="end" value="2730"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.22" references="/0/generateElementController/%.1/%/%.3/%.1/%">
      <details key="start" value="2614"/>
      <details key="end" value="2686"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.23" references="/0/generateElementController/%.1/%/%.3/%.1/%/%">
      <details key="start" value="2614"/>
      <details key="end" value="2663"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.24" references="/0/generateElementController/%.1/%/%.3/%.1/%/%/%">
      <details key="start" value="2614"/>
      <details key="end" value="2626"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.25" references="/0/generateElementController/%.1/%/%.3/%.1/%/%/%.1">
      <details key="start" value="2634"/>
      <details key="end" value="2662"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.26" references="/0/generateElementController/%.1/%/%.3/%.1/%/%/%.1/%">
      <details key="start" value="2634"/>
      <details key="end" value="2640"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.27" references="/0/generateElementController/%.1/%/%.3/%.1/%/%/%.1/%/p">
      <details key="start" value="2634"/>
      <details key="end" value="2635"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.28" references="/0/generateElementController/%.1/%/%.3/%.1/%/%/%.1/%.1">
      <details key="start" value="2652"/>
      <details key="end" value="2657"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.29" references="/0/generateElementController/%.1/%/%.3/%.1/%/%/%.1/%.2">
      <details key="start" value="2658"/>
      <details key="end" value="2661"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.30" references="/0/generateElementController/%.1/%/%.3/%.1/%/%.1">
      <details key="start" value="2671"/>
      <details key="end" value="2685"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.31" references="/0/generateElementController/%.1/%/%.3/%.1/%.1">
      <details key="start" value="2694"/>
      <details key="end" value="2729"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.32" references="/0/generateElementController/%.1/%/%.4">
      <details key="start" value="7673"/>
      <details key="end" value="7674"/>
      <details key="line" value="192"/>
    </eAnnotations>
    <eAnnotations source="positions.33" references="/0/generateElementController/%.1/%/%.5">
      <details key="start" value="7674"/>
      <details key="end" value="14662"/>
      <details key="line" value="193"/>
    </eAnnotations>
    <eAnnotations source="positions.34" references="/0/generateElementController/%.1/%/%.5/%">
      <details key="start" value="7809"/>
      <details key="end" value="14655"/>
      <details key="line" value="194"/>
    </eAnnotations>
    <eAnnotations source="positions.35" references="/0/generateElementController/%.1/%/%.5/%.1">
      <details key="start" value="7681"/>
      <details key="end" value="7788"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.36" references="/0/generateElementController/%.1/%/%.5/%.1/%">
      <details key="start" value="7681"/>
      <details key="end" value="7753"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.37" references="/0/generateElementController/%.1/%/%.5/%.1/%/%">
      <details key="start" value="7681"/>
      <details key="end" value="7730"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.38" references="/0/generateElementController/%.1/%/%.5/%.1/%/%/%">
      <details key="start" value="7681"/>
      <details key="end" value="7693"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.39" references="/0/generateElementController/%.1/%/%.5/%.1/%/%/%.1">
      <details key="start" value="7701"/>
      <details key="end" value="7729"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.40" references="/0/generateElementController/%.1/%/%.5/%.1/%/%/%.1/%">
      <details key="start" value="7701"/>
      <details key="end" value="7707"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.41" references="/0/generateElementController/%.1/%/%.5/%.1/%/%/%.1/%/p">
      <details key="start" value="7701"/>
      <details key="end" value="7702"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.42" references="/0/generateElementController/%.1/%/%.5/%.1/%/%/%.1/%.1">
      <details key="start" value="7719"/>
      <details key="end" value="7724"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.43" references="/0/generateElementController/%.1/%/%.5/%.1/%/%/%.1/%.2">
      <details key="start" value="7725"/>
      <details key="end" value="7728"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.44" references="/0/generateElementController/%.1/%/%.5/%.1/%/%.1">
      <details key="start" value="7738"/>
      <details key="end" value="7752"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.45" references="/0/generateElementController/%.1/%/%.5/%.1/%.1">
      <details key="start" value="7761"/>
      <details key="end" value="7787"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.46" references="/0/generateElementController/%.1/%/%.6">
      <details key="start" value="14663"/>
      <details key="end" value="14664"/>
      <details key="line" value="362"/>
    </eAnnotations>
    <eAnnotations source="positions.47" references="/0/generateElementController/%.1/%/%.7">
      <details key="start" value="14664"/>
      <details key="end" value="15868"/>
      <details key="line" value="363"/>
    </eAnnotations>
    <eAnnotations source="positions.48" references="/0/generateElementController/%.1/%/%.7/%">
      <details key="start" value="14809"/>
      <details key="end" value="15861"/>
      <details key="line" value="364"/>
    </eAnnotations>
    <eAnnotations source="positions.49" references="/0/generateElementController/%.1/%/%.7/%.1">
      <details key="start" value="14671"/>
      <details key="end" value="14788"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.50" references="/0/generateElementController/%.1/%/%.7/%.1/%">
      <details key="start" value="14671"/>
      <details key="end" value="14743"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.51" references="/0/generateElementController/%.1/%/%.7/%.1/%/%">
      <details key="start" value="14671"/>
      <details key="end" value="14720"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.52" references="/0/generateElementController/%.1/%/%.7/%.1/%/%/%">
      <details key="start" value="14671"/>
      <details key="end" value="14683"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.53" references="/0/generateElementController/%.1/%/%.7/%.1/%/%/%.1">
      <details key="start" value="14691"/>
      <details key="end" value="14719"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.54" references="/0/generateElementController/%.1/%/%.7/%.1/%/%/%.1/%">
      <details key="start" value="14691"/>
      <details key="end" value="14697"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.55" references="/0/generateElementController/%.1/%/%.7/%.1/%/%/%.1/%/p">
      <details key="start" value="14691"/>
      <details key="end" value="14692"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.56" references="/0/generateElementController/%.1/%/%.7/%.1/%/%/%.1/%.1">
      <details key="start" value="14709"/>
      <details key="end" value="14714"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.57" references="/0/generateElementController/%.1/%/%.7/%.1/%/%/%.1/%.2">
      <details key="start" value="14715"/>
      <details key="end" value="14718"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.58" references="/0/generateElementController/%.1/%/%.7/%.1/%/%.1">
      <details key="start" value="14728"/>
      <details key="end" value="14742"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.59" references="/0/generateElementController/%.1/%/%.7/%.1/%.1">
      <details key="start" value="14751"/>
      <details key="end" value="14787"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.60" references="/0/generateElementController/%.1/%/%.8">
      <details key="start" value="15869"/>
      <details key="end" value="15870"/>
      <details key="line" value="389"/>
    </eAnnotations>
    <eAnnotations source="positions.61" references="/0/generateElementController/%.1/%/%.9">
      <details key="start" value="15870"/>
      <details key="end" value="22408"/>
      <details key="line" value="390"/>
    </eAnnotations>
    <eAnnotations source="positions.62" references="/0/generateElementController/%.1/%/%.9/%">
      <details key="start" value="16000"/>
      <details key="end" value="22401"/>
      <details key="line" value="391"/>
    </eAnnotations>
    <eAnnotations source="positions.63" references="/0/generateElementController/%.1/%/%.9/%.1">
      <details key="start" value="15877"/>
      <details key="end" value="15979"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.64" references="/0/generateElementController/%.1/%/%.9/%.1/%">
      <details key="start" value="15877"/>
      <details key="end" value="15949"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.65" references="/0/generateElementController/%.1/%/%.9/%.1/%/%">
      <details key="start" value="15877"/>
      <details key="end" value="15926"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.66" references="/0/generateElementController/%.1/%/%.9/%.1/%/%/%">
      <details key="start" value="15877"/>
      <details key="end" value="15889"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.67" references="/0/generateElementController/%.1/%/%.9/%.1/%/%/%.1">
      <details key="start" value="15897"/>
      <details key="end" value="15925"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.68" references="/0/generateElementController/%.1/%/%.9/%.1/%/%/%.1/%">
      <details key="start" value="15897"/>
      <details key="end" value="15903"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.69" references="/0/generateElementController/%.1/%/%.9/%.1/%/%/%.1/%/p">
      <details key="start" value="15897"/>
      <details key="end" value="15898"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.70" references="/0/generateElementController/%.1/%/%.9/%.1/%/%/%.1/%.1">
      <details key="start" value="15915"/>
      <details key="end" value="15920"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.71" references="/0/generateElementController/%.1/%/%.9/%.1/%/%/%.1/%.2">
      <details key="start" value="15921"/>
      <details key="end" value="15924"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.72" references="/0/generateElementController/%.1/%/%.9/%.1/%/%.1">
      <details key="start" value="15934"/>
      <details key="end" value="15948"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.73" references="/0/generateElementController/%.1/%/%.9/%.1/%.1">
      <details key="start" value="15957"/>
      <details key="end" value="15978"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.74" references="/0/generateElementController/%.1/%/%.10">
      <details key="start" value="22409"/>
      <details key="end" value="22410"/>
      <details key="line" value="562"/>
    </eAnnotations>
    <eAnnotations source="positions.75" references="/0/generateElementController/%.1/%/%.11">
      <details key="start" value="22410"/>
      <details key="end" value="25259"/>
      <details key="line" value="563"/>
    </eAnnotations>
    <eAnnotations source="positions.76" references="/0/generateElementController/%.1/%/%.11/%">
      <details key="start" value="22544"/>
      <details key="end" value="25252"/>
      <details key="line" value="564"/>
    </eAnnotations>
    <eAnnotations source="positions.77" references="/0/generateElementController/%.1/%/%.11/%.1">
      <details key="start" value="22417"/>
      <details key="end" value="22523"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.78" references="/0/generateElementController/%.1/%/%.11/%.1/%">
      <details key="start" value="22417"/>
      <details key="end" value="22489"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.79" references="/0/generateElementController/%.1/%/%.11/%.1/%/%">
      <details key="start" value="22417"/>
      <details key="end" value="22466"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.80" references="/0/generateElementController/%.1/%/%.11/%.1/%/%/%">
      <details key="start" value="22417"/>
      <details key="end" value="22429"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.81" references="/0/generateElementController/%.1/%/%.11/%.1/%/%/%.1">
      <details key="start" value="22437"/>
      <details key="end" value="22465"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.82" references="/0/generateElementController/%.1/%/%.11/%.1/%/%/%.1/%">
      <details key="start" value="22437"/>
      <details key="end" value="22443"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.83" references="/0/generateElementController/%.1/%/%.11/%.1/%/%/%.1/%/p">
      <details key="start" value="22437"/>
      <details key="end" value="22438"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.84" references="/0/generateElementController/%.1/%/%.11/%.1/%/%/%.1/%.1">
      <details key="start" value="22455"/>
      <details key="end" value="22460"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.85" references="/0/generateElementController/%.1/%/%.11/%.1/%/%/%.1/%.2">
      <details key="start" value="22461"/>
      <details key="end" value="22464"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.86" references="/0/generateElementController/%.1/%/%.11/%.1/%/%.1">
      <details key="start" value="22474"/>
      <details key="end" value="22488"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.87" references="/0/generateElementController/%.1/%/%.11/%.1/%.1">
      <details key="start" value="22497"/>
      <details key="end" value="22522"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.88" references="/0/generateElementController/%.1/%/%.12">
      <details key="start" value="25260"/>
      <details key="end" value="25261"/>
      <details key="line" value="637"/>
    </eAnnotations>
    <eAnnotations source="positions.89" references="/0/generateElementController/%.1/%/%.13">
      <details key="start" value="237"/>
      <details key="end" value="297"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.90" references="/0/generateElementController/%.1/%/%.13/%">
      <details key="start" value="237"/>
      <details key="end" value="243"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.91" references="/0/generateElementController/%.1/%/%.13/%/p">
      <details key="start" value="237"/>
      <details key="end" value="238"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.92" references="/0/generateElementController/%.1/%/%.13/%.1">
      <details key="start" value="261"/>
      <details key="end" value="296"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.93" references="/0/generateElementController/%.1/p">
      <details key="start" value="177"/>
      <details key="end" value="188"/>
      <details key="line" value="8"/>
    </eAnnotations>
    <eAnnotations source="positions.94" references="/0/generateElementController/%.1/%.1">
      <details key="start" value="191"/>
      <details key="end" value="230"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.95" references="/0/generateElementController/%.1/%.1/%">
      <details key="start" value="191"/>
      <details key="end" value="213"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.96" references="/0/generateElementController/%.1/%.1/%/aModel">
      <details key="start" value="191"/>
      <details key="end" value="197"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.97" references="/0/generateElementController/%.1/%.1/%.1">
      <details key="start" value="222"/>
      <details key="end" value="229"/>
      <details key="line" value="0"/>
    </eAnnotations>
    <eAnnotations source="positions.98" references="/0/generateElementController/aModel">
      <details key="start" value="135"/>
      <details key="end" value="149"/>
      <details key="line" value="5"/>
    </eAnnotations>
  </ecore:EAnnotation>
</xmi:XMI>
